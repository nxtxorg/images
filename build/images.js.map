{"version":3,"file":"images.js","sources":["../nxtx-interface.ts","../src/images.ts"],"sourcesContent":["export interface Node {\n    type: NodeType,\n    value?: any,\n    name?: string,\n    args?: Array<Node>\n}\nexport enum NodeType {\n    Paragraph = 1,\n    Command,\n    Text,\n    Block,\n    Html,\n    Node,\n\n    Boolean = 10,\n    Dictionary = 11,\n    Array,\n    Number,\n    String\n}\n\nexport interface ArgumentCheck {\n    expected: NodeType,\n    actual: NodeType,\n    index: number\n}\nexport interface ArgumentCheckResult {\n    ok: boolean,\n    invalid: Array<ArgumentCheck>\n}\n\ntype CommandResultTypes = Node | HTMLElement | Text | undefined | void\ntype CommandResultType = Promise<CommandResultTypes> | CommandResultTypes\nexport type CommandResult = Array<CommandResultType> | CommandResultType\nexport type CommandFunction = (...args:Array<Node>) => CommandResult\n\nexport interface Package {\n    name: string,\n    requires?: Array<string>,\n    commands?: { [name:string]: CommandFunction },\n    preprocessors?: { [name:string]: CommandFunction },\n    hooks?: { prerender?:()=>void, midrender?:()=>void, postrender?:()=>void }\n}\n\nexport type RenderEvent = 'prerender'|'midrender'|'postrender'\n\nexport interface INxtx {\n    registerCommand: (cmd:string, fn:CommandFunction, overwrite?:boolean) => void\n    registerPreprocessor: (cmd:string, fn:CommandFunction, overwrite?:boolean) => void\n    verifyArguments: (types:Array<NodeType>, ...args:Array<Node>) => ArgumentCheckResult\n    registerPackage: (pkg:Package) => void\n\n    parse: (code:string) => Array<Node>\n    render: (code:string, root:HTMLElement) => Promise<void>\n\n    text: (content:string) => Text\n    htmlLite: (nodeName:string, attributes:object, ...children:Array<HTMLElement|string>) => HTMLElement\n    html: (nodeName:string, attributes:object, ...children:Array<Promise<HTMLElement|Node|string>|HTMLElement|Node|string>) => Promise<HTMLElement>\n\n    on: (event:RenderEvent, handler:()=>void) => void\n    off: (event:RenderEvent, handler:()=>void) => void\n}","/*  Image package for nxtx\n    Author: Malte Rosenbjerg\n    License: MIT */\n\nimport {NodeType, Package, INxtx} from '../nxtx-interface';\ndeclare const nxtx: INxtx;\n\nconst pkg : Package = {\n    name: 'images',\n    commands: {\n        'image': (srcNode, pctNode = { type: NodeType.Number, value: 100 }) => nxtx.htmlLite('img', { src: srcNode.value, style: `max-width: ${pctNode.value}%` }),\n        'images': (srcArray) => srcArray.value.map(srcNode => nxtx.htmlLite('img', { src: srcNode.value, style: `max-width: calc(${(99.9 / srcArray.value.length)}% - 4px); margin: 2px` }))\n    }\n};\n\nif (nxtx) nxtx.registerPackage(pkg);\n\nexport default pkg;"],"names":[],"mappings":";;;IAMA,IAAY,QAaX;IAbD,WAAY,QAAQ;QAChB,iDAAa,CAAA;QACb,6CAAO,CAAA;QACP,uCAAI,CAAA;QACJ,yCAAK,CAAA;QACL,uCAAI,CAAA;QACJ,uCAAI,CAAA;QAEJ,8CAAY,CAAA;QACZ,oDAAe,CAAA;QACf,0CAAK,CAAA;QACL,4CAAM,CAAA;QACN,4CAAM,CAAA;IACV,CAAC,EAbW,QAAQ,KAAR,QAAQ,QAanB;;ICZD,IAAM,GAAG,GAAa;QAClB,IAAI,EAAE,QAAQ;QACd,QAAQ,EAAE;YACN,OAAO,EAAE,UAAC,OAAO,EAAE,OAA+C;gBAA/C,wBAAA,EAAA,YAAY,IAAI,EAAE,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE;gBAAK,OAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE,GAAG,EAAE,OAAO,CAAC,KAAK,EAAE,KAAK,EAAE,gBAAc,OAAO,CAAC,KAAK,MAAG,EAAE,CAAC;aAAA;YAC1J,QAAQ,EAAE,UAAC,QAAQ,IAAK,OAAA,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,UAAA,OAAO,IAAI,OAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE,GAAG,EAAE,OAAO,CAAC,KAAK,EAAE,KAAK,EAAE,sBAAoB,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,0BAAuB,EAAE,CAAC,GAAA,CAAC,GAAA;SACvL;KACJ,CAAC;IAEF,IAAI,IAAI;QAAE,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;;;;;;;;"}