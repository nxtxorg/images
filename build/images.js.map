{"version":3,"file":"images.js","sources":["../nxtx.ts","../src/images.ts"],"sourcesContent":["export interface Node {\r\n    type: NodeType,\r\n    value?: any,\r\n    name?: string,\r\n    args?: Array<Node>\r\n}\r\nexport enum NodeType {\r\n    Paragraph = 1,\r\n    Command,\r\n    Text,\r\n    Block,\r\n    Html,\r\n    Node,\r\n    Dictionary = 11,\r\n    Array,\r\n    Number,\r\n    String\r\n}\r\n\r\nexport interface ArgumentCheck {\r\n    expected: NodeType,\r\n    actual: NodeType,\r\n    index: number\r\n}\r\nexport interface ArgumentCheckResult {\r\n    ok: boolean,\r\n    invalid: Array<ArgumentCheck>\r\n}\r\n\r\ntype CommandResultTypes = Node | HTMLElement | Text | undefined | void\r\ntype CommandResultType = Promise<CommandResultTypes> | CommandResultTypes\r\nexport type CommandResult = Array<CommandResultType> | CommandResultType\r\nexport type CommandFunction = (...args:Array<Node>) => CommandResult\r\n\r\nexport interface Package {\r\n    name: string,\r\n    requires?: Array<string>,\r\n    commands?: { [name:string]: CommandFunction },\r\n    preprocessors?: { [name:string]: CommandFunction },\r\n    hooks?: { prerender?:()=>void, midrender?:()=>void, postrender?:()=>void }\r\n}\r\n\r\nexport type RenderEvent = 'prerender'|'midrender'|'postrender'\r\n\r\nexport interface INxtx {\r\n    registerCommand: (cmd:string, fn:CommandFunction, overwrite?:boolean) => void\r\n    registerPreprocessor: (cmd:string, fn:CommandFunction, overwrite?:boolean) => void\r\n    verifyArguments: (types:Array<NodeType>, ...args:Array<Node>) => ArgumentCheckResult\r\n    registerPackage: (pkg:Package) => void\r\n\r\n    parse: (code:string) => Array<Node>\r\n    render: (code:string, root:HTMLElement) => Promise<void>\r\n\r\n    text: (content:string) => Text\r\n    htmlLite: (nodeName:string, attributes:object, ...children:Array<HTMLElement|string>) => HTMLElement\r\n    html: (nodeName:string, attributes:object, ...children:Array<Promise<HTMLElement|Node|string>|HTMLElement|Node|string>) => Promise<HTMLElement>\r\n\r\n    on: (event:RenderEvent, handler:()=>void) => void\r\n    off: (event:RenderEvent, handler:()=>void) => void\r\n}","/*  Image package for nxtx\n    Author: Malte Rosenbjerg\n    License: MIT */\n\nimport {NodeType, Package, INxtx} from '../nxtx';\ndeclare const nxtx: INxtx;\n\nconst pkg : Package = {\n    name: 'images',\n    commands: {\n        'image': (srcNode, pctNode = { type: NodeType.Number, value: 100 }) => nxtx.htmlLite('img', { src: srcNode.value, style: `max-width: ${pctNode.value}%` }),\n        'images': (srcArray) => srcArray.value.map(srcNode => nxtx.htmlLite('img', { src: srcNode.value, style: `max-width: calc(${(99.9 / srcArray.value.length)}% - 4px); margin: 2px` }))\n    }\n};\n\nif (nxtx) nxtx.registerPackage(pkg);\n\nexport default pkg;"],"names":["NodeType","pkg","name","commands","image","srcNode","pctNode","type","Number","value","nxtx","htmlLite","src","style","images","srcArray","map","length","registerPackage"],"mappings":"mCAMA,IAAYA,GAAZ,SAAYA,GACRA,6BACAA,yBACAA,mBACAA,qBACAA,mBACAA,mBACAA,gCACAA,sBACAA,wBACAA,wBAVJ,CAAYA,IAAAA,OCCZ,IAAMC,EAAgB,CAClBC,KAAM,SACNC,SAAU,CACNC,MAAS,SAACC,EAASC,GAAoD,oBAApDA,GAAYC,KAAMP,EAASQ,OAAQC,MAAO,MAAUC,KAAKC,SAAS,MAAO,CAAEC,IAAKP,EAAQI,MAAOI,MAAO,cAAcP,EAAQG,aAC/IK,OAAU,SAACC,GAAa,OAAAA,EAASN,MAAMO,IAAI,SAAAX,GAAW,OAAAK,KAAKC,SAAS,MAAO,CAAEC,IAAKP,EAAQI,MAAOI,MAAO,mBAAoB,KAAOE,EAASN,MAAMQ,6CAItJP,MAAMA,KAAKQ,gBAAgBjB"}